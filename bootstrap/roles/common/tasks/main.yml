---

- name: update apt-get cache
  apt: update_cache=yes
  sudo: yes
  tags: 
    - common

- name: install the latest version of git
  apt: name=git state=latest
  sudo: yes
  tags: 
    - common
    - git

- name: install the latest version of vim
  apt: name=vim state=latest
  sudo: yes
  tags: 
    - common
    - vim

- name: checkout latest version of drush 6.x
  git: repo=https://github.com/drush-ops/drush.git dest=/home/vagrant/drush version=6.x
  tags: 
    - common
    - drush
  
- name: symlink drush executable to /usr/local/bin
  file: src=/home/vagrant/drush/drush dest=/usr/local/bin/drush state=link
  sudo: yes
  tags:
    - common
    - drush

- name: ensure pubkey is available
  authorized_key: user=vagrant key="{{ lookup('file', '~/.ssh/id_rsa.pub') }}" state=present
  tags:
    - common
