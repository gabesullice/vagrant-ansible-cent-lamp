---

#- name: ensure default mysql-libs package is absent
#  yum: name=mysql-libs state=absent
#  sudo: yes
#  tags:
#    - database
#    - mysql

- name: ensure mysql and supporting packages are present
  apt: name={{ item }} state=present
  sudo: yes
  with_items:
    #- mysql55
    #- mysql55-libs
    - mysql-server
    #- php53u-mysql
  tags:
    - database
    - mysql

- name: ensure mysql is started
  service: name=mysql state=started enabled=yes
  sudo: yes
  tags:
    - database
    - mysql

- name: ensure my.cnf is present
  copy: src=my.cnf dest=/etc/my.cnf mode=0644
  sudo: yes
  notify:
    - restart mysql
  tags:
    - database
    - mysql

- name: install mysql python package #required for mysql_db tasks
  apt: name=python-mysqldb state=present
  sudo: yes
  tags:
    - database
    - mysql
